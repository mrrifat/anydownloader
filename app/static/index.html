<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Anydownloader — Video Downloader</title>
  <script>
    (() => {
      const saved = localStorage.getItem("theme");
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      const enableDark = saved ? saved === "dark" : prefersDark;
      document.documentElement.classList.toggle("dark", enableDark);
    })();
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .neon { box-shadow: 0 0 6px #8B5CF6, 0 0 18px #8B5CF6AA, inset 0 0 0 1px #8B5CF644; }
    .glass { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
    .spin { animation: spin 1s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  </style>
</head>
<body class="min-h-screen bg-slate-900 text-slate-200 dark:bg-[#0F172A] dark:text-slate-200 transition-colors">
  <header class="sticky top-0 z-20 bg-slate-900/60 dark:bg-slate-900/60 glass border-b border-white/5">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-xl bg-[#8B5CF6] neon"></div>
        <h1 class="text-xl font-semibold tracking-tight">Anydownloader</h1>
      </div>
      <div class="flex items-center gap-3">
        <button id="themeToggle"
                class="px-3 py-2 rounded-xl border border-white/10 hover:border-white/20 neon bg-white/5 text-sm">
          Toggle <span class="hidden sm:inline">Dark/Light</span>
        </button>
        <a href="https://downloader.fil-bd.com" class="text-xs sm:text-sm opacity-70 hover:opacity-100">downloader.fil-bd.com</a>
      </div>
    </div>
  </header>
  <main class="max-w-6xl mx-auto px-4 pt-12 pb-16">
    <section class="text-center">
      <h2 class="text-3xl sm:text-5xl font-extrabold tracking-tight">
        Download videos. <span class="text-[#8B5CF6] drop-shadow-[0_0_10px_rgba(139,92,246,0.6)]">Fast.</span>
      </h2>
      <p class="mt-4 text-slate-400 max-w-2xl mx-auto">Paste any supported video URL...</p>
      <div class="mt-8 mx-auto max-w-3xl p-6 sm:p-8 rounded-3xl glass bg-white/5 border border-white/10 neon">
        <label for="videoUrl" class="block text-left text-sm font-medium text-slate-300 mb-2">Video URL</label>
        <div class="flex flex-col sm:flex-row gap-3">
          <input id="videoUrl" type="url" required placeholder="https://www.youtube.com/watch?v=..." class="flex-1 w-full px-4 py-3 rounded-xl bg-slate-800/60 border border-white/10 focus:outline-none focus:ring-2 focus:ring-[#8B5CF6] placeholder:text-slate-500" />
          <button id="downloadBtn" class="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-[#8B5CF6] text-white font-medium hover:opacity-95 active:opacity-90 neon disabled:opacity-60 disabled:cursor-not-allowed">
            <svg id="btnSpinner" class="hidden w-5 h-5 spin" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="9" stroke-opacity="0.2" stroke-width="4"></circle>
              <path d="M21 12a9 9 0 0 0-9-9" stroke-width="4" stroke-linecap="round"></path>
            </svg>
            <span id="btnText">Get Download Link</span>
          </button>
        </div>
        <p id="message" class="mt-4 text-sm"></p>
      </div>
    </section>
  </main>
  <footer class="border-t border-white/5"><div class="max-w-6xl mx-auto px-4 py-10 text-sm text-slate-500">© <span id="year"></span> Anydownloader</div></footer>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
    document.getElementById("themeToggle").addEventListener("click", () => {
      const isDark = document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });
    const btn=document.getElementById("downloadBtn"),spinner=document.getElementById("btnSpinner"),btnText=document.getElementById("btnText"),msg=document.getElementById("message"),urlInput=document.getElementById("videoUrl");
    function setLoading(v){btn.disabled=v;spinner.classList.toggle("hidden",!v);btnText.textContent=v?"Working...":"Get Download Link";msg.textContent="";}
    btn.addEventListener("click",async()=>{const url=urlInput.value.trim();if(!url){msg.textContent="Please paste a video URL.";msg.className="mt-4 text-sm text-amber-400";return;}setLoading(true);try{const res=await fetch("/api/download-and-upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url})});const data=await res.json();if(!res.ok)throw new Error(data.detail||"Unknown error");if(data.downloadUrl){window.open(data.downloadUrl,"_blank","noopener");msg.textContent="Your download will open in a new tab.";msg.className="mt-4 text-sm text-emerald-400";}else{throw new Error("API did not return a downloadUrl");}}catch(err){msg.textContent="Error: "+err.message;msg.className="mt-4 text-sm text-rose-400";}finally{setLoading(false);}});
  </script>
</body></html>